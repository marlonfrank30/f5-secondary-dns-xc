#TMSH-VERSION: 17.5.1.4

gtm datacenter /Common/adelaide {
    contact "marlon frank"
    description adelaide
    location "10 adeline st"
}
gtm datacenter /Common/mawsonlakes {
    location "10 adeline st"
}
gtm region /Common/internal {
    region-members {
        subnet 192.168.0.0/24 { }
    }
}
gtm server /Common/bigip1.madebeen.com {
    datacenter /Common/mawsonlakes
    devices {
        /Common/bigip1.madebeen.com {
            addresses {
                192.168.0.249 { }
            }
        }
        /Common/bigip2.madebeen.com {
            addresses {
                192.168.0.250 { }
            }
        }
    }
    monitor /Common/bigip
    product bigip
    virtual-server-discovery enabled-no-delete
    virtual-servers {
        adfs_madebeen_com_Internal_apm {
            destination 192.168.0.214:4444
        }
        adfs_madebeen_com_Internal_asm {
            depends-on {
                /Common/bigip1.madebeen.com:adfs_madebeen_com_Internal_apm { }
            }
            destination 192.168.0.213:4444
        }
        adfs_madebeen_com_NATed_apm {
            destination 108.85.14.147:4444
            translation-address 192.168.0.214
            translation-port 4444
        }
        adfs_madebeen_com_NATed_asm {
            depends-on {
                /Common/bigip1.madebeen.com:adfs_madebeen_com_NATed_apm { }
            }
            destination 108.85.14.147:4444
            translation-address 192.168.0.213
            translation-port 4444
        }
        ftp_madebeen_com_NATed {
            destination 108.85.14.147:21
            translation-address 192.168.0.202
            translation-port 21
        }
        http_madebeen_com_Internal {
            destination 192.168.0.201:80
        }
        idp_madebeen_com_NATed {
            destination 108.85.14.147:4334
            translation-address 192.168.0.209
            translation-port 4334
        }
        imap_madebeen_com_NATed {
            destination 108.85.14.147:143
            translation-address 192.168.0.203
            translation-port 143
        }
        pop3_madebeen_com_NATed {
            destination 108.85.14.147:110
            translation-address 192.168.0.206
            translation-port 110
        }
        rdp_madebeen_com_NATed {
            destination 108.85.14.147:3389
            translation-address 192.168.0.205
            translation-port 3389
        }
        sftp_madebeen_com_NATed {
            destination 108.85.14.147:22
            translation-address 192.168.0.215
            translation-port 22
        }
        smtp_madebeen_com_NATed {
            destination 108.85.14.147:25
            translation-address 192.168.0.204
            translation-port 25
        }
        sp_madebeen_com_NATed {
            destination 108.85.14.147:4333
            translation-address 192.168.0.208
            translation-port 4333
        }
        ssl_madebeen_com_Internal {
            destination 192.168.0.201:443
        }
        vpn_madebeen_com_DTLS_NATed {
            destination 108.85.14.147:4433
            translation-address 192.168.0.212
            translation-port 4433
        }
        vpn_madebeen_com_NATed {
            destination 108.85.14.147:4443
            translation-address 192.168.0.212
            translation-port 4443
        }
        www_madebeen_com_NATed {
            destination 108.85.14.147:80
            translation-address 192.168.0.201
            translation-port 80
        }
        www_madebeen_com_NATed_443 {
            destination 108.85.14.147:443
            translation-address 192.168.0.201
            translation-port 443
        }
    }
}
gtm topology ldns: subnet 192.168.0.0/24 server: pool /Common/www.madebeen.com_LTM_internal {
    order 1
}
gtm topology ldns: subnet 192.168.0.0/24 server: pool /Common/ssl.madebeen.com_LTM_internal {
    order 2
}
gtm topology ldns: continent NA server: datacenter /Common/adelaide {
    order 3
    score 50
}
gtm topology ldns: continent AS server: datacenter /Common/mawsonlakes {
    order 4
    score 50
}
gtm topology ldns: not subnet 192.168.0.0/24 server: pool /Common/www.madebeen.com_LTM_443 {
    order 5
}
gtm topology ldns: not subnet 192.168.0.0/24 server: pool /Common/www.madebeen.com_LTM {
    order 6
}
gtm global-settings general {
    iquery-minimum-tls-version TLSv1.2
    synchronization yes
    synchronization-group-name madebeen
    synchronize-zone-files yes
}
gtm global-settings metrics {
    metrics-collection-protocols { udp icmp tcp dns-dot dns-rev }
}
gtm global-settings metrics-exclusions {
    addresses none
}
gtm monitor bigip /Common/test {
    aggregate-dynamic-ratios none
    defaults-from /Common/bigip
    destination *:*
    interval 30
    timeout 90
}
gtm monitor gateway-icmp /Common/gateway_google2 {
    defaults-from /Common/gateway_icmp
    destination 8.8.8.8:*
    interval 30
    probe-attempts 3
    probe-interval 1
    probe-timeout 5
    timeout 120
}
gtm monitor http /Common/connect_monitor {
    defaults-from /Common/http
    destination *:*
    interval 5
    probe-timeout 5
    recv "HTTP/1.1 200"
    send "CONNECT www.amazon.com HTTP/1.1\r\nUser-Agent:F5 monitor\r\nHost: www.amazon.com\r\nCache-Control: no-store\r\nConnection: Close\r\n\r\n"
    timeout 16
}
gtm monitor tcp-half-open /Common/tcp_half_open_test {
    defaults-from /Common/tcp_half_open
    destination 10.0.8.86:443
    interval 30
    probe-attempts 3
    probe-interval 1
    probe-timeout 5
    timeout 120
}
gtm monitor udp /Common/google_icmp {
    debug no
    defaults-from /Common/udp
    destination 8.8.8.8:53
    interval 30
    probe-attempts 3
    probe-interval 1
    probe-timeout 5
    send "default send string"
    timeout 120
}
gtm pool a /Common/adfs.madebeen.com_LTM {
    members {
        /Common/bigip1.madebeen.com:adfs_madebeen_com_NATed_asm {
            member-order 0
        }
    }
}
gtm pool a /Common/ftp.madebeen.com_LTM {
    members {
        /Common/bigip1.madebeen.com:ftp_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/idp.madebeen.com_LTM {
    members {
        /Common/bigip1.madebeen.com:idp_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/imap.madebeen.com_LTM {
    load-balancing-mode global-availability
    members {
        /Common/bigip1.madebeen.com:imap_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/mail2.madebeen.com {
    fallback-mode none
}
gtm pool a /Common/mail.madebeen.com {
    fallback-mode none
    members {
        /Common/bigip1.madebeen.com:smtp_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/pop3.madebeen.com_LTM {
    load-balancing-mode global-availability
    members {
        /Common/bigip1.madebeen.com:pop3_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/rdp.madebeen.com_LTM {
    load-balancing-mode least-connections
    members {
        /Common/bigip1.madebeen.com:rdp_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/sftp.madebeen.com_LTM {
    load-balancing-mode global-availability
    members {
        /Common/bigip1.madebeen.com:sftp_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/sp.madebeen.com_LTM {
    members {
        /Common/bigip1.madebeen.com:sp_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/ssl.madebeen.com_LTM_internal {
    load-balancing-mode topology
    members {
        /Common/bigip1.madebeen.com:ssl_madebeen_com_Internal {
            member-order 0
        }
    }
}
gtm pool a /Common/vpn.madebeen.com_LTM {
    members {
        /Common/bigip1.madebeen.com:vpn_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/www.madebeen.com_LTM {
    load-balancing-mode fewest-hops
    members {
        /Common/bigip1.madebeen.com:www_madebeen_com_NATed {
            member-order 0
        }
    }
}
gtm pool a /Common/www.madebeen.com_LTM_443 {
    members {
        /Common/bigip1.madebeen.com:www_madebeen_com_NATed_443 {
            member-order 0
        }
    }
}
gtm pool a /Common/www.madebeen.com_LTM_internal {
    load-balancing-mode topology
    members {
        /Common/bigip1.madebeen.com:http_madebeen_com_Internal {
            member-order 0
        }
    }
}
gtm pool mx /Common/smtp.madebeen.com_LTM {
    load-balancing-mode global-availability
    max-answers-returned 2
    members {
        mail2.madebeen.com {
            member-order 1
            priority 20
        }
        mail.madebeen.com {
            member-order 0
        }
    }
}
gtm wideip a /Common/adfs.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/adfs.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/ftp.madebeen.com {
    pools {
        /Common/ftp.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/idp.madebeen.com {
    pools {
        /Common/idp.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/imap.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/imap.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/madebeen.com {
    pools {
        /Common/www.madebeen.com_LTM {
            order 1
        }
        /Common/www.madebeen.com_LTM_443 {
            order 0
        }
    }
}
gtm wideip a /Common/mail2.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/mail2.madebeen.com {
            order 0
        }
    }
}
gtm wideip a /Common/mail.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/mail.madebeen.com {
            order 0
        }
    }
}
gtm wideip a /Common/pop3.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/pop3.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/rdp.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/rdp.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/sftp.madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/sftp.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/sp.madebeen.com {
    pools {
        /Common/sp.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/test.madebeen.com {
    pools {
        /Common/www.madebeen.com_LTM_443 {
            order 0
        }
    }
}
gtm wideip a /Common/vpn.madebeen.com {
    pools {
        /Common/vpn.madebeen.com_LTM {
            order 0
        }
    }
}
gtm wideip a /Common/www.madebeen.com {
    pools {
        /Common/www.madebeen.com_LTM {
            order 0
        }
        /Common/www.madebeen.com_LTM_443 {
            order 1
        }
    }
}
gtm wideip mx /Common/madebeen.com {
    pool-lb-mode global-availability
    pools {
        /Common/smtp.madebeen.com_LTM {
            order 0
        }
    }
}
ltm dns dnssec key /Common/bigip1_ksk_key {
    generation {
        1 {
            creator bigip1.madebeen.com
            handle 0A9E9C055B3D89C01B772A54486A502
            key-tag 39861
            private-text $M$Tv$vRbs2kmjNk+pX9ha847XXsy1zXBtSaBIlBmo9MOO/DomQdGYcR3mrzLY/FGAsddDKi5j/C1iJeAwoKLutiSVrp4dWErzWhdQ2wsKNrYfECuW/yCbPk8bwGzXXPy2JaOlADpromUTsEHehgQesMsSvgidEA2wVXjSAhyRkJ/ihFjcY7zlWvRdeH4Taqd+Kbzp5L0u3nVB/BfWRcyQoZz7BdHyQtu8VyEwPvM8GFeBBlrCXbIM68CYF/Y5Hgnj+UqdRVqMsFk2JTfgy8L6liTJqU4KS+9C5GOzMOuxa5sLMzGBQAATZILsGZAnpEfEjpY49uNvSNlZkGEhxWpFZbjNdoQBpNL711yxhQlswAFNn2MqQsYpeiE5cjFc5bsTzqR8KNvfVPYKl4NZ+r2A+zWkbgxl8wYxelprUO2UksXBChcRytzesbUwPI4RLxMh++5EUChqtDz+Z8xadJCPC2zqIkdnrlYvXVYWeMyAJaZdfca3KhiOkNAteCbj/hE8aiIpms2YvalXhs2GDB6dr4vAMv6R/Z0QDgpFLnXsEfbbW0OWyl+4q+PKSWKaZyVn/vgsNvXIbJWVqPu/sIFfarY+MfPRwcwO+irgc48XESLsSaj2vevp+MDgsOR8Tf+vjq+xTew1hEIGLFbU+zqVHjb8k/aF382fQyhi3KOD8T+06aQ3DJOBj5ajBGM2/g62jJUc4N1a2Imj+ioH/agI0WCCB9KvGsJxaMXcUwBe1yY/kYwnBTG7ZZiPwcE/EPa2b2+y5BHAxYn8JwQgaAYOAIW4EbhO2umYDkxFc5glTt7ZJDS7IKgz6Vl6Qgsvb7J2PTP85jSFqJqz/Ci3XLFe3d+IVbinjuDUwaCwSc3S+ONGgwHUDDLifPsyCrP53Xg8DvEZ2XhpWMyUZNr8/J/ACQVCtMJnVR8A5wV57sm102icVOlSFwwteNlw7g3zM0ye7f5OIrhlDLrJKvX902Foeu/mgt5r/8OUuIL6EmANjWV6md0cu3hkqWGwL4Lc2Id//cvTc3hEAzZAYoDJxYNEzulyV/19Sx6Ar5t4099YJ9EPlgNnsb8coxt4EdRhBvinSQ0Z
            public-text MIGJAoGBANkF527On5Hcm81TFxBoa/yHh8HzglMnZF9BgDPfESTiYDagj/GYRvvrtzvL959zps+xfjF+85Vpc8fuyWa1uOmbeXx390IJokuUeJ5+9QMMSOsPmXlLynpdNuD8PrYKOedxm4T1UvIoJbRWb+nQOnBmHdzYBO5ReK7MLN5QzS4dAgMBAAE=
        }
    }
    key-type ksk
}
ltm dns dnssec key /Common/bigip1_zsk_key {
    generation {
        1 {
            creator bigip1.madebeen.com
            handle 0A011C77B08B59956D01207AFD2945D
            key-tag 57512
            private-text $M$u0$yzBR07xcvyx9P0EAgAryMhv+cAD51umV7JmCxFPVE7lY5Nc6ZHZpcREfZHr1wGN+pZPyLY8c28TpkycPXfzjEtZTN2Wi8wJEjC/b071H/FSj8CQxDmpUfFdSN0wA7zKF+dqS3jIqaPBURy+W6nMmmdN1sehuHtr/y2RKeQQoAwF1ZC1fisF4qoM+aAnPxl7TJeYA3YBX+2mIuRfVMaax6TWkXuh3GDb5rfrkJ1LTMOw1BdDMtCR2R7IniHbWG4p5PGEMmjXl0gWDuXraykyAKkAXJCM8nwKMvrET8OgB9mfEf27mwLB+lTKaYF5UGt8rT22BB8MGFGrfCkEHTCRclKiQLBnnJGQoVXM1TiOS16Osfjjf9lZmmU/UOjxecf3C9dP+2BLFzO6H7t+0dXMuvnlfz3mFaocYsCPemRU9imPNMasZBY3WTgRaV+7pkiZCjRjXmWiqtlJma3TW498yEDmRd0rBjxPeRpkDqnq22WF4kBf3iq3obL8e3fJRUyigqk4Zo7qzgzcxLPZiLQjSTC9eBw02dpL4hK4xjiGmM9VijLcbxWTfOT1RKDRVYym2S34652YiWXUwLA1MJIM5fwEQj0F3B6ftpzybSJCVuB7/KBQ63eeslRJ85ke2NthCzQrdHG+e8kunZFgSa8T0dXBTZFlb94YNwFJAFKP0stf6vpdOkdotUe1MB4HtBzIQxkCu0zQxrvrGfI2gM/ov1MoA+aOb9wxlFZucuPjEDmm+VKeiDvjNpelqmT2sRC4Nu+yXZVW+uY9TDvPVPO4+7QRbPlxssTuZwOPkImPxt6gwgprsxsAQ6fPHmdiCwNqiTxHyCV4aiD2qMnziCJ+bmZv4iPSDRMOin1iJfEcncOVyKwxdJwZbEkgPBVzFKh6z/rc3OJUYtVV+0j9U8GfzlYAiLttiWzmdVWWqdrKD8nlIfXjrv9UxjLQQQ7Oc3bKFWw7VXW81AoxdR4eGqyW+gex7iSjzsxFZpPjzz3Mp3h17oZ5rS/Stv+dJ6qxeFOQWR4cOb+DOgycLRW1fEWyWrPsEyleBzWbW+goiDqXn1XnWrPbxfelFhKkyUCBPJdR2
            public-text MIGJAoGBANYoyAVhhE2s0W9B2SHnSpdVAmEMvWFEKnR7ihvToLjmBXhIWrESka6axtbIsKLZ1t62Xc8gVURG6wBTZtcin71WYIwp3J1lAhI2doHY5oD72Kheva7+aRq8huz7gLS1y5Evm/bXBnRWjvFev/Mee3jey1lm7/8WDsRONzxzOy6hAgMBAAE=
        }
    }
}
ltm dns dnssec zone /Common/madebeen.com {
    ds-algorithms { sha1 }
    keys {
        /Common/bigip1_ksk_key
        /Common/bigip1_zsk_key
    }
    xfr-primary-soa-serial 2026021201
    xfr-soa-serial 2024121751
}
